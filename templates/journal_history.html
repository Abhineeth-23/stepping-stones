{% extends "base.html" %}
{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold dark:text-white">Journal History</h1>
        <a href="{{ url_for('dashboard') }}" class="text-blue-500 hover:underline">‚Üê Back to Dashboard</a>
    </div>

    <div class="space-y-6">
        {% for entry in journals %}
        <div class="bg-white dark:bg-gray-800 p-6 rounded shadow border dark:border-gray-700">
            <form action="{{ url_for('edit_old_journal', id=entry.id) }}" method="POST">
                <div class="flex justify-between items-center mb-4 border-b dark:border-gray-700 pb-2">
                    <input name="title" value="{{ entry.title }}" class="font-bold text-xl bg-transparent focus:outline-none dark:text-white w-full">
                    <span class="text-xs text-gray-400 whitespace-nowrap ml-4">{{ entry.date.strftime('%Y-%m-%d') }}</span>
                </div>

                <textarea name="content" class="w-full bg-transparent border-none focus:ring-0 dark:text-gray-300 resize-y min-h-[100px]">{{ entry.content }}</textarea>

                {% set time_diff = (now - entry.created_at).total_seconds() / 3600 %}
                
                <div class="mt-4 flex justify-end">
                    {% if time_diff < 48 %}
                        <button class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200">Update Entry</button>
                    {% else %}
                        <span class="text-xs text-gray-400 flex items-center gap-1">üîí Locked (Archived)</span>
                    {% endif %}
                </div>
            </form>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}